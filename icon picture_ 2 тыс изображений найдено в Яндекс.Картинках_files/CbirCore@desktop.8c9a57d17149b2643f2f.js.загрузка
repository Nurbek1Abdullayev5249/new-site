!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="https://yastatic.net/s3/fiji-static/_/",n(n.s=2)}({2:function(t,e,n){n("yYyQ"),t.exports=n("qWFb")},"8Qk7":function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var o=n("SA1Q");e.appendQueryString=o.appendQueryString,e.stringifyUrlParams=o.stringifyUrlParams;var i,u=n("bVLW"),a="application/json; charset=utf-8",c={Accept:a},s=function(){};function f(t,e,n,o){void 0===e&&(e={});var i=r({},"json"===e.format?c:{},e.headers),u=e.body,s="";return Object.keys(i).some((function(t){return"content-type"===t.toLowerCase()}))?s=String(u||""):(i["content-type"]=a,"string"!=typeof u&&(s=JSON.stringify(u))),l(t,r({},e,{method:o,headers:i}),n,s)}function l(t,e,n,r){var a=n.successCallback,c=void 0===a?s:a,f=n.failureCallback,l=void 0===f?s:f,d=e.headers,p=void 0===d?{}:d,h=e.queryParams,b=void 0===h?{}:h,v=e.timeout,y=void 0===v?3e4:v,w=e.credentials,m=void 0===w?"include":w,g=e.method,O=void 0===g?"GET":g,j=function(t,n){var r=t.response;if("json"===e.format)try{r=JSON.parse(r)}catch(o){return void l(i.JSON_PARSE_ERROR,t)}n?l(n,t,r):c(r,t)},_=new XMLHttpRequest;return _.open(O,o.appendQueryString(t,b)),_.withCredentials=u.shouldSendCredentials(t,m),_.timeout=y,Object.keys(p).forEach((function(t){return _.setRequestHeader(t,p[t])})),_.onload=function(){_.status>=200&&_.status<300?j(_):j(_,i.ERROR_STATUS_CODE)},_.onerror=function(){l(i.REQUEST_FAILED,_)},_.ontimeout=function(){l(i.TIMEOUT,_)},_.send(r),_}!function(t){t.TIMEOUT="TIMEOUT",t.REQUEST_FAILED="REQUEST_FAILED",t.JSON_PARSE_ERROR="JSON_PARSE_ERROR",t.ERROR_STATUS_CODE="ERROR_STATUS_CODE"}(i=e.AjaxError||(e.AjaxError={})),e.get=function(t,e,n){return void 0===e&&(e={}),l(t,r({},e,{method:"GET"}),n)},e.post=function(t,e,n){return void 0===e&&(e={}),f(t,e,n,"POST")},e.put=function(t,e,n){return void 0===e&&(e={}),f(t,e,n,"PUT")},e.del=function(t,e,n){return void 0===e&&(e={}),f(t,e,n,"DELETE")},e.sendRequest=l},"9Bea":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var n=t%10,r=t%100;return t?1===n&&11!==r?e.one:n>1&&n<5&&(r<10||r>20)?e.some:e.many||"":e.none||""}},"Aok+":function(t,e,n){"use strict";n.r(e),n.d(e,"getHistoryQueue",(function(){return o}));var r=n("K+Fd"),o=function(){return window.Ya=window.Ya||{},window.Ya.HistoryQueue||(window.Ya.HistoryQueue=new r.HistoryQueue),window.Ya.HistoryQueue}},Aplp:function(t,e,n){"use strict";var r,o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),i={},u=0,a=0;function c(t){var e="";do{e=o[t%64]+e,t=Math.floor(t/64)}while(t>0);return e}function s(){var t=c(+new Date);return t!==r?(u=0,r=t):t+"."+c(u++)}for(;a<64;a++)i[o[a]]=a;s.encode=c,s.decode=function(t){var e=0;for(a=0;a<t.length;a++)e=64*e+i[t.charAt(a)];return e},t.exports=s},Axkg:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var n=t%10,r=t%100;return t?1===n&&11!==r?e.one:n>1&&n<5&&(r<10||r>20)?e.some:e.many||"":e.none||""}},BJbV:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return t?1===t?e.one:e.some:e.none||""}},D1uz:function(t,e,n){"use strict";n.r(e),n.d(e,"useChangeCbirPage",(function(){return f}));var r=n("cDcd"),o=n("QGFb"),i=n("eWTM"),u=n("NFCg"),a=function(){return a=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},a.apply(this,arguments)},c=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function u(t){try{c(r.next(t))}catch(e){i(e)}}function a(t){try{c(r.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,a)}c((r=r.apply(t,e||[])).next())}))},s=function(t,e){var n,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,r=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=e.call(t,u)}catch(a){i=[6,a],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},f=function(){var t=Object(i.useHistoryPushState)(),e=Object(u.useHistoryReplaceState)();return Object(r.useCallback)((function(n){var r=n.pageType,i=n.queryParams,u=n.url,f=void 0===u?function(t){return void 0===t&&(t={}),BEM.blocks.uri.buildRelativeUrl(BEM.blocks["i-global"].param("router").search,BEM.blocks["i-url-controller"].mergePassedUrlParams(t))}(i):u,l=n.state,d=void 0===l?{}:l,p=n.title,h=n.withReplace,b=n.withLoad,v=n.withLegacyLocationChange;return c(void 0,void 0,void 0,(function(){var n;return s(this,(function(i){switch(i.label){case 0:return v?(Object(o.reactBus)().emit("location:change",{url:f}),[2]):(n=void 0!==r?a(a({},d),{cbirPageType:r}):d,h?[4,e(n,p,f)]:[3,2]);case 1:return i.sent(),[3,4];case 2:return[4,t(n,p,f)];case 3:i.sent(),i.label=4;case 4:return Object(o.reactBus)().emit("cbir:change-page",{pageType:r,url:f,withReplace:!0,withLoad:b}),[2]}}))}))}),[e,t])}},"Dps+":function(t,e,n){"use strict";t.exports=n("gWr/")},HivH:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var n=t%10,r=t%100;return t?1===n&&11!==r?e.one:n>1&&n<5&&(r<10||r>20)?e.some:e.many||"":e.none||""}},ISzt:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var n=t%10,r=t%100;return t?1===n&&11!==r?e.one:n>1&&n<5&&(r<10||r>20)?e.some:e.many||"":e.none||""}},"K+Fd":function(t,e,n){"use strict";n.r(e),n.d(e,"HistoryQueue",(function(){return o}));var r=n("tI3j"),o=function(){function t(){this.listeners=[],this.jobs=[],this.onPopState=this.onPopState.bind(this)}return t.prototype.resolveCurrentJob=function(t,e){this.listeners.forEach((function(e){return e(t)})),this.currentJob&&this.currentJob.async===e?(this.currentJob.resolve(t),this.currentJob=void 0):this.reset()},t.prototype.executeCurrentJob=function(){var t=this;this.currentJob&&(this.currentJob.execute(),this.currentJob.async||(this.nextTickJobTimeoutId=window.setTimeout((function(){t.resolveCurrentJob(Object(r.getGlobalHistoryState)(),!1),t.next()}))))},t.prototype.onPopState=function(t){this.resolveCurrentJob(t.state||{},!0),this.next()},t.prototype.next=function(){this.currentJob||(this.currentJob=this.jobs.shift(),this.executeCurrentJob())},t.prototype.reset=function(){this.jobs=[],this.currentJob=void 0,window.clearTimeout(this.nextTickJobTimeoutId)},t.prototype.startListening=function(t){0===this.listeners.length&&window.addEventListener("popstate",this.onPopState),this.listeners.push(t)},t.prototype.stopListening=function(t){this.listeners=this.listeners.filter((function(e){return e!==t})),0===this.listeners.length&&window.removeEventListener("popstate",this.onPopState)},t.prototype.pushJob=function(t,e){var n=this;return new Promise((function(r){n.jobs.push({execute:t,resolve:r,async:e}),n.next()}))},t}()},MMKl:function(t,e,n){"use strict";var r=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}};Object.defineProperty(e,"__esModule",{value:!0});var o=n("ISzt"),i=n("BJbV"),u=n("zU8/"),a=n("9Bea"),c=n("Axkg"),s=n("gKus"),f=n("jm4S"),l=n("HivH"),d=n("n8NE"),p={be:o.default,en:i.default,id:u.default,kk:a.default,ru:c.default,tr:s.default,tt:f.default,uk:l.default,uz:d.default},h=["ru"];function b(t){return-1===["tr","id","fi","lt","pl","et","lv"].indexOf(t)?"ru":"en"}function v(t,e){for(var n=[],r=t.length,o=0;o<r;){var i=t.indexOf("{",o);if(-1===i)return n.push(t.substring(o)),n;var u=t.indexOf("}",i);if(-1===u)return n.push(t.substring(o)),n;n.push(t.substring(o,i),e[t.substring(i+1,u)]),o=u+1}return n}function y(t,e,n){void 0===n&&(n={});var o=function(t,e){var n,o,i;try{for(var u=r(h),a=u.next();!a.done;a=u.next())if((i=t[a.value])&&e in i)return i[e]}catch(c){n={error:c}}finally{try{a&&!a.done&&(o=u.return)&&o.call(u)}finally{if(n)throw n.error}}return e}(t,e);return"string"==typeof o?v(o,n):function(t,e){var n=h.find((function(t){return Boolean(p[t])}))||b(h[0]);return v((0,p[n])(e.count,t),e)}(o,n)}e.default=function(t){return function(e,n){return void 0===n&&(n={}),y(t,e,n).join("")}},e.i18nRaw=function(t){return function(e,n){return void 0===n&&(n={}),y(t,e,n)}},e.setI18nLang=function(t){h="string"==typeof t?[t,b(t),"ru"]:t},e.getI18nLang=function(){return h[0]},e.resolveI18nLang=function(t,e,n){var r=e;if(-1===t.indexOf(r))switch(n){case"com":r="en";break;case"com.tr":r="tr";break;default:r="ru"}return r}},NFCg:function(t,e,n){"use strict";n.r(e),n.d(e,"useHistoryReplaceState",(function(){return u}));var r=n("cDcd"),o=n("tI3j"),i=n("Aok+"),u=function(){return Object(r.useCallback)((function(t,e,n){return void 0===e&&(e=document.title),void 0===n&&(n=location.href),Object(i.getHistoryQueue)().pushJob((function(){return history.replaceState(Object(o.mergeHistoryState)(t),e,n)}),!1)}),[])}},PXGI:function(t,e,n){"use strict";n.r(e),n.d(e,"loadImage",(function(){return u})),n.d(e,"loadImageFromBlob",(function(){return a}));var r=n("qPv9"),o=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function u(t){try{c(r.next(t))}catch(e){i(e)}}function a(t){try{c(r.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,a)}c((r=r.apply(t,e||[])).next())}))},i=function(t,e){var n,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,r=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=e.call(t,u)}catch(a){i=[6,a],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},u=function(t,e){var n=void 0===e?{}:e,o=n.crossOrigin,i=n.referrerPolicy;return new Promise((function(e,n){var u=new Image;Object(r.setAttribute)(u,"crossOrigin",o),Object(r.setAttribute)(u,"referrerPolicy",i),Object(r.setAttribute)(u,"onload",(function(){return e(u)})),Object(r.setAttribute)(u,"onerror",(function(){return n(new Error("Image loading failed"))})),Object(r.setAttribute)(u,"src",t)}))},a=function(t){return o(void 0,void 0,Promise,(function(){var e,n,r,o;return i(this,(function(i){switch(i.label){case 0:e=window.URL||window.webkitURL,n=e.createObjectURL(t),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,u(n)];case 2:return r=i.sent(),e.revokeObjectURL(n),[2,r];case 3:throw o=i.sent(),e.revokeObjectURL(n),o;case 4:return[2]}}))}))}},QGFb:function(t,e,n){"use strict";n.r(e),n.d(e,"reactBus",(function(){return r}));var r=function(){return window.Ya.reactBus}},Qa6K:function(t,e,n){"use strict";n.r(e),n.d(e,"prepareHitParams",(function(){return i})),n.d(e,"hit",(function(){return a})),n.d(e,"hitDelayed",(function(){return c}));var r=n("WD9m"),o=n("t8E2"),i=function(t,e){var n=t.dtype,o=void 0===n?"iweb":n,i=t.reqid,u=t.path,a=t.vars;void 0===e&&(e=!0);var c={dtype:o,reqid:i,path:u,pid:t.pid,cid:t.cid},s=a&&Object(r.varsToString)(a,e);return s&&(c.vars=s),c},u=function(){},a=o.canUseDom?function(t,e,n,r){var o,u=void 0===e?{}:e,a=u.reqid,c=u.dtype,s=u.vars,f=u.pid,l=u.cid,d=u.href;void 0===n&&(n=!0);var p=(void 0===r?{}:r).prepareHitParamsCb,h=void 0===p?i:p;null===(o=window.c)||void 0===o||o.hit(h({path:t,reqid:a,dtype:c,vars:s,pid:f,cid:l},n),d?{href:d}:void 0)}:u,c=o.canUseDom?function(t,e,n,r){var o,u=void 0===e?{}:e,a=u.reqid,c=u.dtype,s=u.vars,f=u.pid,l=u.cid,d=u.href;void 0===n&&(n=!0);var p=(void 0===r?{}:r).prepareHitParamsCb,h=void 0===p?i:p;null===(o=window.c)||void 0===o||o.hitDelayed(h({path:t,reqid:a,dtype:c,vars:s,pid:f,cid:l},n),d?{href:d}:void 0)}:u},SA1Q:function(t,e,n){"use strict";function r(t){return Object.keys(t).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(String(t[e]))})).join("&")}Object.defineProperty(e,"__esModule",{value:!0}),e.stringifyUrlParams=r,e.appendQueryString=function(t,e){var n=r(e);return 0===n.length?t:t.indexOf("?")>-1?t+"&"+n:t+"?"+n}},VQUf:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return o}));var r=n("cDcd");function o(){var t=Object(r.useRef)(!1),e=Object(r.useCallback)((function(){return t.current}),[]);return Object(r.useEffect)((function(){return t.current=!0,function(){t.current=!1}})),e}},W54c:function(t,e,n){"use strict";n.r(e),n.d(e,"getGlobalContext",(function(){return r})),n.d(e,"getGlobalParam",(function(){return o})),n.d(e,"getFlags",(function(){return i})),n.d(e,"getFlagValue",(function(){return u})),n.d(e,"isFlagEnabled",(function(){return a}));var r=function(){var t;return(null===(t=null===window||void 0===window?void 0:window.Ya)||void 0===t?void 0:t.SerpContext)||{}},o=function(t){return r()[t]},i=function(){return o("expFlags")||{}},u=function(t){return i()[t]},a=function(t){return Boolean(u(t))}},WD9m:function(t,e,n){"use strict";n.r(e),n.d(e,"varsToString",(function(){return i})),n.d(e,"addBaobabParams",(function(){return u})),n.d(e,"addCounterParams",(function(){return a})),n.d(e,"prepareSerpCounter",(function(){return c})),n.d(e,"varsToObject",(function(){return s}));var r=function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)},o=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),u=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)u.push(r.value)}catch(a){o={error:a}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return u};function i(t,e){if("string"==typeof t||!t)return t||"";if(Array.isArray(t))return t.join(",");var n=e?"-":"";return Object.keys(t).filter((function(e){return void 0!==t[e]&&""!==t[e]})).map((function(e){return""+(n&&0===e.indexOf(n)?"":n)+e+"="+t[e]})).join(",")}function u(t){if(t)return t.logNode}function a(t,e,n,o){void 0===e&&(e={}),void 0===n&&(n={}),void 0===o&&(o={href:""});var u=c(t);if(!u||!u.__oldCounter__)return u;var a=u.__oldCounter__,f=i(r(r({},s(a.vars||{})),s(e)),!0);return r(r({},u),{__oldCounter__:r(r(r({},a),{vars:f}),n),node:o})}function c(t){if(t&&Array.isArray(t.counter)){var e=o(t.counter,2);return{__oldCounter__:{path:e[0]||"",vars:e[1]||""}}}return t||{}}function s(t){return void 0===t&&(t={}),"object"==typeof t?t:t.split(",").reduce((function(t,e){var n=e.split("=");return t[n[0]]=n[1],t}),{})}},Z29Q:function(t,e,n){"use strict";n.r(e),n.d(e,"isClient",(function(){return o})),n.d(e,"on",(function(){return i})),n.d(e,"off",(function(){return u})),n.d(e,"isDeepEqual",(function(){return a}));var r=n("nkPT"),o="object"==typeof window,i=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return t.addEventListener.apply(t,e)},u=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return t.removeEventListener.apply(t,e)},a=n.n(r).a},bVLW:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("o62I");e.shouldSendCredentials=function(t,e){return!(!e||"omit"===e)&&("include"===e||r.getOrigin(t)===r.getOrigin(window.location))}},cDcd:function(t,e){t.exports=React},dNJn:function(t,e,n){"use strict";Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(null==t)throw new TypeError("Cannot convert undefined or null to object");var r=Object(t);return e.forEach((function(t){t&&Object.keys(t).forEach((function(e){var n=Object.getOwnPropertyDescriptor(t,e);void 0!==n&&n.enumerable&&(r[e]=t[e])}))})),r}})},eWTM:function(t,e,n){"use strict";n.r(e),n.d(e,"useHistoryPushState",(function(){return u}));var r=n("cDcd"),o=n("tI3j"),i=n("Aok+"),u=function(){return Object(r.useCallback)((function(t,e,n){return void 0===e&&(e=document.title),void 0===n&&(n=location.href),Object(i.getHistoryQueue)().pushJob((function(){return history.pushState(Object(o.mergeHistoryState)(t),e,n)}),!1)}),[])}},faye:function(t,e){t.exports=ReactDOM},gKus:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var n=t%10,r=t%100;return t?1===n&&11!==r?e.one:n>1&&n<5&&(r<10||r>20)?e.some:e.many||"":e.none||""}},"gWr/":function(t,e,n){"use strict";function r(t){var e=t.n||"",n=t.v||t.m;function r(r,o,i,u){var a=o?e+r+t.e+o:e+r,c=a;if(i){var s=" "+c+t.m;for(var f in i)if(i.hasOwnProperty(f)){var l=i[f];!0===l?c+=s+f:l&&(c+=s+f+n+l)}}if(void 0!==u)for(var d=0,p=u.length;d<p;d++){var h=u[d];if("string"==typeof h&&h)for(var b=h.split(" "),v=0;v<b.length;v++){var y=b[v];y!==a&&(c+=" "+y)}}return c}return function(t,e){return function(n,o,i){return"string"==typeof n?Array.isArray(o)?r(t,n,void 0,o):r(t,n,o,i):r(t,e,n,o)}}}Object.defineProperty(e,"__esModule",{value:!0});var o=r({e:"-",m:"_"});e.cn=o,e.withNaming=r},"i0/C":function(t,e,n){"use strict";n.r(e),n.d(e,"__extends",(function(){return o})),n.d(e,"__assign",(function(){return i})),n.d(e,"__rest",(function(){return u})),n.d(e,"__decorate",(function(){return a})),n.d(e,"__param",(function(){return c})),n.d(e,"__metadata",(function(){return s})),n.d(e,"__awaiter",(function(){return f})),n.d(e,"__generator",(function(){return l})),n.d(e,"__createBinding",(function(){return d})),n.d(e,"__exportStar",(function(){return p})),n.d(e,"__values",(function(){return h})),n.d(e,"__read",(function(){return b})),n.d(e,"__spread",(function(){return v})),n.d(e,"__spreadArrays",(function(){return y})),n.d(e,"__spreadArray",(function(){return w})),n.d(e,"__await",(function(){return m})),n.d(e,"__asyncGenerator",(function(){return g})),n.d(e,"__asyncDelegator",(function(){return O})),n.d(e,"__asyncValues",(function(){return j})),n.d(e,"__makeTemplateObject",(function(){return _})),n.d(e,"__importStar",(function(){return E})),n.d(e,"__importDefault",(function(){return x})),n.d(e,"__classPrivateFieldGet",(function(){return k})),n.d(e,"__classPrivateFieldSet",(function(){return P}));var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)};function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var i=function(){return i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)};function u(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]])}return n}function a(t,e,n,r){var o,i=arguments.length,u=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(u=(i<3?o(u):i>3?o(e,n,u):o(e,n))||u);return i>3&&u&&Object.defineProperty(e,n,u),u}function c(t,e){return function(n,r){e(n,r,t)}}function s(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function f(t,e,n,r){return new(n||(n=Promise))((function(o,i){function u(t){try{c(r.next(t))}catch(e){i(e)}}function a(t){try{c(r.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,a)}c((r=r.apply(t,e||[])).next())}))}function l(t,e){var n,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,r=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=e.call(t,u)}catch(a){i=[6,a],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}var d=Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]};function p(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||d(e,t,n)}function h(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function b(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),u=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)u.push(r.value)}catch(a){o={error:a}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return u}function v(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(b(arguments[e]));return t}function y(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],u=0,a=i.length;u<a;u++,o++)r[o]=i[u];return r}function w(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||e)}function m(t){return this instanceof m?(this.v=t,this):new m(t)}function g(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,o=n.apply(t,e||[]),i=[];return r={},u("next"),u("throw"),u("return"),r[Symbol.asyncIterator]=function(){return this},r;function u(t){o[t]&&(r[t]=function(e){return new Promise((function(n,r){i.push([t,e,n,r])>1||a(t,e)}))})}function a(t,e){try{(n=o[t](e)).value instanceof m?Promise.resolve(n.value.v).then(c,s):f(i[0][2],n)}catch(r){f(i[0][3],r)}var n}function c(t){a("next",t)}function s(t){a("throw",t)}function f(t,e){t(e),i.shift(),i.length&&a(i[0][0],i[0][1])}}function O(t){var e,n;return e={},r("next"),r("throw",(function(t){throw t})),r("return"),e[Symbol.iterator]=function(){return this},e;function r(r,o){e[r]=t[r]?function(e){return(n=!n)?{value:m(t[r](e)),done:"return"===r}:o?o(e):e}:o}}function j(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=h(t),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(n){e[n]=t[n]&&function(e){return new Promise((function(r,o){(function(t,e,n,r){Promise.resolve(r).then((function(e){t({value:e,done:n})}),e)})(r,o,(e=t[n](e)).done,e.value)}))}}}function _(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var S=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e};function E(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&d(e,t,n);return S(e,t),e}function x(t){return t&&t.__esModule?t:{default:t}}function k(t,e,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(t):r?r.value:e.get(t)}function P(t,e,n,r,o){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?o.call(t,n):o?o.value=n:e.set(t,n),n}},"jC/K":function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return o})),n.d(e,"ensuredForwardRef",(function(){return i}));var r=n("cDcd");function o(t){var e=Object(r.useRef)(t&&t.current);return Object(r.useEffect)((function(){t&&(t.current=e.current)}),[t]),e}function i(t){return Object(r.forwardRef)((function(e,n){var r=o(n);return t(e,r)}))}},jVLD:function(t,e,n){"use strict";"function"==typeof Element&&(Element.prototype.matches=Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector)},jm4S:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var n=t%10,r=t%100;return t?1===n&&11!==r?e.one:n>1&&n<5&&(r<10||r>20)?e.some:e.many||"":e.none||""}},mqMm:function(t,e,n){"use strict";n.r(e);var r=n("i0/C"),o=n("cDcd");e.default=function(t){void 0===t&&(t=new Set);var e=Object(o.useState)(t),n=e[0],i=e[1],u=Object(o.useMemo)((function(){return{add:function(t){return i((function(e){return new Set(Object(r.__spreadArrays)(Array.from(e),[t]))}))},remove:function(t){return i((function(e){return new Set(Array.from(e).filter((function(e){return e!==t})))}))},toggle:function(t){return i((function(e){return e.has(t)?new Set(Array.from(e).filter((function(e){return e!==t}))):new Set(Object(r.__spreadArrays)(Array.from(e),[t]))}))},reset:function(){return i(t)}}}),[i]),a=Object(r.__assign)({has:Object(o.useCallback)((function(t){return n.has(t)}),[n])},u);return[n,a]}},n8NE:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var n=t%10,r=t%100;return t?1===n&&11!==r?e.one:n>1&&n<5&&(r<10||r>20)?e.some:e.many||"":e.none||""}},"n9/c":function(t,e,n){"use strict";n.r(e),n.d(e,"HydratePriority",(function(){return h})),n.d(e,"createApp",(function(){return w})),n.d(e,"getRootMounter",(function(){return m}));var r,o,i=n("cDcd"),u=n.n(i),a=n("faye"),c=n.n(a),s=n("Aplp"),f=n.n(s),l=(n("W54c"),n("QGFb")),d=n("t8E2");function p(t){var e=("undefined"!=typeof window&&(r=window.innerHeight,o=window.innerWidth),{height:r,width:o}),n=t.getBoundingClientRect();return 0!==n.width&&0!==n.height&&(!(n.bottom<=0||n.right<=0)&&(n.top<e.height&&n.left<e.width))}n("dNJn"),n("jVLD");var h,b=function(){return b=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},b.apply(this,arguments)},v="Root",y="Root_inited";function w(t,e){void 0===e&&(e={});var n={},r=e.hydratePriority,o=void 0===r?h.force:r;return function(e){var r;if(d.canUseDom){var a=m(e,t,n);Object(l.reactBus)()&&(Object(l.reactBus)().on("react-adapter:unmount",(function(t){return function(t,e){Object.keys(t).forEach((function(n){var r=t[n];e&&!e.contains(r)||(c.a.unmountComponentAtNode(r),r.classList.remove(y),delete t[n])}))}(n,t)})),Object(l.reactBus)().on("react-adapter:mount",(function(t){return a(t)})));var s=(null===(r=window.Ya)||void 0===r?void 0:r.SerpContext)||{};(s&&s.expFlags||{}).react_init_on_page_load||s.reactInitOnPageLoad?"complete"===document.readyState||"interactive"===document.readyState?a():document.addEventListener("DOMContentLoaded",(function(){return a()})):window.BEM&&BEM.DOM.ready((function(){return a()}))}return function(n){return u.a.createElement("div",{className:v,id:t+"-"+f()(),"data-state":JSON.stringify(n),"data-hydrate-priority":o},u.a.createElement(i.StrictMode,null,u.a.createElement(e,b({},n))))}}}function m(t,e,n){return function(r){for(var o=r?r.getElementsByClassName(v):document.getElementsByClassName(v),i=new RegExp("^"+e+"-"),u=0;u<o.length;u+=1){var a=o[u],c=a.id;c&&i.test(c)&&g(t,a,n)}}}function g(t,e,n){var r=e.getAttribute("data-hydrate-priority"),o=function(){return function(t,e,n){var r=e.id;if(n[r]||e.classList.contains(y))return;var o=function(t){return JSON.parse(t.getAttribute("data-state")||"{}")}(e);n[r]=e,c.a.hydrate(u.a.createElement(i.StrictMode,null,u.a.createElement(t,b({},o))),e,(function(){e.classList.add(y)}))}(t,e,n)};if(r!==h.force)if(r!==h.checkVisible){if(r!==h.deferred)return o();window.requestAnimationFrame(o)}else{p(e)?o():window.requestAnimationFrame(o)}else o()}!function(t){t.force="force",t.checkVisible="check-visible",t.deferred="deferred"}(h||(h={}))},nkPT:function(t,e,n){"use strict";t.exports=function t(e,n){if(e===n)return!0;if(e&&n&&"object"==typeof e&&"object"==typeof n){if(e.constructor!==n.constructor)return!1;var r,o,i;if(Array.isArray(e)){if((r=e.length)!=n.length)return!1;for(o=r;0!=o--;)if(!t(e[o],n[o]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if((r=(i=Object.keys(e)).length)!==Object.keys(n).length)return!1;for(o=r;0!=o--;)if(!Object.prototype.hasOwnProperty.call(n,i[o]))return!1;for(o=r;0!=o--;){var u=i[o];if(("_owner"!==u||!e.$$typeof)&&!t(e[u],n[u]))return!1}return!0}return e!=e&&n!=n}},o62I:function(t,e,n){"use strict";function r(t,e){if("function"!=typeof URL){var n=document.createElement("a");return n.href=t,{hostname:n.hostname,port:n.port,protocol:n.protocol,origin:n.origin}}try{return new URL(t,e)}catch(r){}}Object.defineProperty(e,"__esModule",{value:!0}),e.parseUrl=r,e.getOrigin=function(t){var e="string"==typeof t?r(t):t;if(!e)return"";if(e.origin)return e.origin;var n=e.port?":"+e.port:"";return e.protocol+"//"+e.hostname+n},e.getHostname=function(t,e){var n=r(t,e);return n?n.hostname:""}},qPv9:function(t,e,n){"use strict";n.r(e),n.d(e,"setAttribute",(function(){return r}));var r=function(t,e,n){void 0!==n&&(t[e]=n)}},qWFb:function(t,e,n){"use strict";n.r(e),n.d(e,"App",(function(){return Ot}));var r=n("n9/c"),o=n("cDcd"),i=n.n(o),u=n("W54c"),a=n("QGFb"),c=n("Qa6K"),s=n("s2SP"),f=n("qqpq"),l=Array.prototype.slice,d=function(t){var e=Object(o.useCallback)((function(e){var n=e.clipboardData||window.clipboardData;if(n){var r=function(t){if(t.items){var e=l.call(t.items).find((function(t){return"file"===t.kind}));if(e)return e.getAsFile()}return t.files.length>0?t.files[0]:null}(n);r&&(e.preventDefault(),t(r))}}),[t]);Object(f.default)("paste",e)},p=n("t8E2");p.canUseDom&&!HTMLCanvasElement.prototype.toBlob&&Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(t,e,n){void 0===e&&(e="image/png");var r=this.toDataURL(e,n).split(",")[1];setTimeout((function(){for(var n=atob(r),o=n.length,i=new Uint8Array(o),u=0;u<o;u++)i[u]=n.charCodeAt(u);t(new Blob([i],{type:e}))}))}});var h=function(t,e,n){return void 0===n&&(n=1),new Promise((function(r,o){try{t.toBlob((function(t){return t?r(t):o(new Error("Resulting Blob is empty"))}),e,n)}catch(i){o(i)}}))},b=n("PXGI"),v=function(t){return new Promise((function(e,n){var r=new FileReader;r.onload=function(){return e(r.result)},r.onerror=n,r.readAsArrayBuffer(t)}))},y=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function u(t){try{c(r.next(t))}catch(e){i(e)}}function a(t){try{c(r.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,a)}c((r=r.apply(t,e||[])).next())}))},w=function(t,e){var n,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,r=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=e.call(t,u)}catch(a){i=[6,a],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},m=1,g=3,O=6,j=8,_=9,S=function(t){return 65280==(65280&t)},E=function(){function t(t){this.offset=0,this.littleEndian=!1,this.view=new DataView(t)}return t.prototype.skip=function(t){this.offset+=t},t.prototype.nextUint16=function(){var t=this.view.getUint16(this.offset,this.littleEndian);return this.skip(2),t},t.prototype.nextUint32=function(){var t=this.view.getUint32(this.offset,this.littleEndian);return this.skip(4),t},t.prototype.setLittleEndian=function(t){this.littleEndian=t},t.prototype.isFinished=function(){return this.offset>=this.view.byteLength},t}(),x=function(t){return y(void 0,void 0,Promise,(function(){var e,n,r,o,i;return w(this,(function(u){switch(u.label){case 0:return"from-image"===getComputedStyle(document.body).imageOrientation?[2,m]:[4,v(t)];case 1:if(e=u.sent(),65496!==(n=new E(e)).nextUint16())return[2,_];for(;!n.isFinished()&&(r=n.nextUint16(),S(r)&&65498!==r&&65497!==r);)if(65505===r)for(n.skip(2),n.skip(6),n.setLittleEndian(18761===n.nextUint16()),n.skip(2),n.skip(n.nextUint32()-8),o=n.nextUint16(),i=0;i<o;i++){if(274===n.nextUint16())return n.skip(6),[2,n.nextUint16()];n.skip(10)}else n.setLittleEndian(!1),n.skip(n.nextUint16()-2);return[2,_]}}))}))},k=function(t,e){var n=document.createElement("canvas");return n.width=t,n.height=e,n},P=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),u=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)u.push(r.value)}catch(a){o={error:a}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return u},C=function(t,e){var n,r,o,i,u,a,c,s=P(function(t,e){var n=0,r=0,o="none";return e===j?(n=t.height,r=t.width,o="left"):e===O?(n=t.height,r=t.width,o="right"):e===g?(n=t.width,r=t.height,o="flip"):(n=t.width,r=t.height),[{width:n,height:r},o]}(t,e),2),f=s[0],l=s[1],d=(r=5e6,o=4096,i=(n=f).width/n.height,u=0,a=0,c={width:0,height:0},n.width*n.height>r?n.width>n.height?(u=Math.sqrt(r*i),c={width:Math.floor(u),height:Math.floor(r/u)}):(a=Math.sqrt(r/i),c={width:Math.floor(r/a),height:Math.floor(a)}):c=n,c.width>o&&(c.width=o,c.height=Math.round(c.width/i)),c.height>o&&(c.height=o,c.width=Math.round(i*c.height)),c),p=k(d.width,d.height),h=p.getContext("2d");if(!h)throw new Error("Cannot get a canvas context");return"left"===l?(h.setTransform(0,-1,1,0,0,d.height),h.drawImage(t,0,0,d.height,d.width)):"right"===l?(h.setTransform(0,1,-1,0,d.width,0),h.drawImage(t,0,0,d.height,d.width)):"flip"===l?(h.setTransform(-1,0,0,-1,d.width,d.height),h.drawImage(t,0,0,d.width,d.height)):(h.setTransform(1,0,0,1,0,0),h.drawImage(t,0,0,d.width,d.height)),p},T=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function u(t){try{c(r.next(t))}catch(e){i(e)}}function a(t){try{c(r.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,a)}c((r=r.apply(t,e||[])).next())}))},R=function(t,e){var n,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,r=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=e.call(t,u)}catch(a){i=[6,a],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},M=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),u=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)u.push(r.value)}catch(a){o={error:a}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return u},A=function(t){return T(void 0,void 0,Promise,(function(){var e,n,r;return R(this,(function(o){switch(o.label){case 0:return[4,Promise.all([Object(b.loadImageFromBlob)(t),x(t)])];case 1:return e=M.apply(void 0,[o.sent(),2]),n=e[0],r=e[1],[2,C(n,r)]}}))}))},D=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function u(t){try{c(r.next(t))}catch(e){i(e)}}function a(t){try{c(r.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,a)}c((r=r.apply(t,e||[])).next())}))},B=function(t,e){var n,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,r=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=e.call(t,u)}catch(a){i=[6,a],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},U=function(t,e,n){return t.width>e&&t.height>n},I=function(t,e,n){return D(void 0,void 0,Promise,(function(){var r,o,i,u,a;return B(this,(function(c){switch(c.label){case 0:return r=t.width/t.height,n<e?n=Math.round(e/r):e=Math.round(n*r),U(t,e,n)?(o=Math.ceil(Math.log(t.width/e)/Math.LN2),i=e*Math.pow(2,o-1),u=n*Math.pow(2,o-1),a=function(r,c){var s=k(i,u),f=s.getContext("2d");return null===f?c(new Error("Cannot get a canvas context")):(f.drawImage(t,0,0,i,u),t.width=1,t.height=1,t=s,o-=1,i=Math.round(i/2),u=Math.round(u/2),o<=0||!U(t,e,n)?r(t):void requestAnimationFrame((function(){return a(r,c)})))},[4,new Promise(a)]):[2,t];case 1:return[2,c.sent()]}}))}))},L=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function u(t){try{c(r.next(t))}catch(e){i(e)}}function a(t){try{c(r.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,a)}c((r=r.apply(t,e||[])).next())}))},q=function(t,e){var n,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,r=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=e.call(t,u)}catch(a){i=[6,a],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},F=function(t){return t.replace(/\/preview$/,"/orig")},Q=n("8Qk7"),H=function(){return H=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},H.apply(this,arguments)},J=function(t){return Object(Q.appendQueryString)("/images-apphost/image-download",H(H({},t),{cbird:111,images_avatars_size:"preview",images_avatars_namespace:"images-cbir"}))},G=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function u(t){try{c(r.next(t))}catch(e){i(e)}}function a(t){try{c(r.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,a)}c((r=r.apply(t,e||[])).next())}))},N=function(t,e){var n,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,r=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=e.call(t,u)}catch(a){i=[6,a],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},z=function(t){return G(void 0,void 0,Promise,(function(){var e,n;return N(this,(function(r){switch(r.label){case 0:return e=J(),[4,fetch(e,{method:"POST",body:t})];case 1:if((n=r.sent()).status<200||n.status>=300)throw new Error("Image upload failed, status code "+n.status);return[4,n.json()];case 2:return[2,r.sent()]}}))}))},K=function(t){return"type"in t&&"captcha"===t.type},W=function(t){var e=Object(u.getGlobalParam)("project").replace("/",".");Object(c.hit)(e,{dtype:"stred",pid:40,cid:72952}),location.assign(t.captcha["captcha-page"])},V=function(t){return t.image_shard+"/"+t.image_id},Y=n("D1uz"),X=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function u(t){try{c(r.next(t))}catch(e){i(e)}}function a(t){try{c(r.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,a)}c((r=r.apply(t,e||[])).next())}))},Z=function(t,e){var n,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,r=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=e.call(t,u)}catch(a){i=[6,a],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},$=function(){var t=Object(Y.useChangeCbirPage)();return Object(o.useCallback)((function(e){var n=e.originalImageUrl,r=e.cbirId;return X(void 0,void 0,void 0,(function(){var e;return Z(this,(function(o){switch(o.label){case 0:return e={rpt:"imageview",from:void 0},n&&(e.url=n),r&&(e.cbir_id=r),BEM.blocks["i-global"].param("isYandexApp")&&(e.service="cbir.yandex"),"0"===BEM.blocks.uri.getParamValue("native")&&(e.native="0"),[4,t({pageType:"search-by-image",queryParams:e,state:{cbirCropRect:void 0,cbirCropId:void 0}})];case 1:return o.sent(),[2]}}))}))}),[t])},tt=function(){var t=Object(o.useRef)(),e=Object(o.useCallback)((function(e){var n=e+"_"+Date.now()+"_"+Math.random();return t.current=n,n}),[]),n=Object(o.useCallback)((function(e){return t.current===e}),[]),r=Object(o.useCallback)((function(){t.current=void 0}),[]),i=Object(o.useCallback)((function(e){t.current=e.searchUniqKey}),[]);return Object(s.useReactBusOn)("cbir:search-by-image:start",i),Object(s.useReactBusOn)("cbir:search-by-image:success",r),Object(s.useReactBusOn)("cbir:search-by-image:error",r),Object(s.useReactBusOn)("cbir:popup-closed",r),[e,n]},et=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function u(t){try{c(r.next(t))}catch(e){i(e)}}function a(t){try{c(r.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,a)}c((r=r.apply(t,e||[])).next())}))},nt=function(t,e){var n,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,r=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=e.call(t,u)}catch(a){i=[6,a],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},rt=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),u=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)u.push(r.value)}catch(a){o={error:a}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return u},ot=/^(?:http|https|ftp):\/\//,it=function(t,e){if(void 0===e&&(e="http:"),ot.test(t))return t;var n=p.canUseDom?location.protocol:e;return 0===t.indexOf("//")?n+t:n+"//"+t},ut=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function u(t){try{c(r.next(t))}catch(e){i(e)}}function a(t){try{c(r.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,a)}c((r=r.apply(t,e||[])).next())}))},at=function(t,e){var n,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,r=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=e.call(t,u)}catch(a){i=[6,a],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},ct=function(t){return ut(void 0,void 0,Promise,(function(){var e,n;return at(this,(function(r){switch(r.label){case 0:return e=J({url:t}),[4,fetch(e,{method:"GET"})];case 1:if((n=r.sent()).status<200||n.status>=300)throw new Error("Image upload failed, status code "+n.status);return[4,n.json()];case 2:return[2,r.sent()]}}))}))},st=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function u(t){try{c(r.next(t))}catch(e){i(e)}}function a(t){try{c(r.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,a)}c((r=r.apply(t,e||[])).next())}))},ft=function(t,e){var n,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,r=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=e.call(t,u)}catch(a){i=[6,a],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},lt=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),u=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)u.push(r.value)}catch(a){o={error:a}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return u},dt=n("mqMm"),pt=n("rpyk"),ht=n("qk/3"),bt=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),u=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)u.push(r.value)}catch(a){o={error:a}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return u},vt=n("jC/K"),yt=n("Dps+"),wt=Object(yt.cn)("CbirCore"),mt=Object(o.forwardRef)((function(t,e){var n=t.onSelect,r=Object(vt.default)(e),u=Object(o.useCallback)((function(){var t;if(r.current){var e=null===(t=r.current.files)||void 0===t?void 0:t[0];e&&n(e),r.current.value=""}}),[r,n]);return i.a.createElement("input",{ref:r,className:wt("FileInput"),type:"file",accept:"image/*",onChange:u,hidden:!0})})),gt=function(t){var e=t.downscaleWidth,n=t.downscaleHeight,r=t.downscaleQuality,f=t.isYandexBroNativeCameraDialog,l=void 0!==f&&f,p=t.isYandexAppAndroid,b=void 0!==p&&p,v=t.isYandexAppIos,y=void 0!==v&&v,w=t.counterPaths,m=Object(o.useRef)(null),g=Object(o.useCallback)((function(t){"file"===t.searchType?Object(c.hit)(w.searchByFileStart,{vars:{size:t.file.size,type:t.file.type}}):Object(c.hit)(w.searchByUrlStart,{vars:{url:t.url}})}),[w]);Object(s.useReactBusOn)("cbir:search-by-image:start",g);var O=Object(o.useCallback)((function(t){"file"===t.searchType?Object(c.hit)(w.searchByFileSuccess,{vars:{size:t.file.size,type:t.file.type,time:t.time}}):Object(c.hit)(w.searchByUrlSuccess,{vars:{url:t.url,time:t.time}})}),[w]);Object(s.useReactBusOn)("cbir:search-by-image:success",O);var j=Object(o.useCallback)((function(t){var e,n=(null===(e=t.error)||void 0===e?void 0:e.message)||t.error;"file"===t.searchType?Object(c.hit)(w.searchByFileError,{vars:{size:t.file.size,type:t.file.type,time:t.time,error:"string"==typeof n?n:""}}):Object(c.hit)(w.searchByUrlError,{vars:{url:t.url,time:t.time,error:"string"==typeof n?n:""}})}),[w]),_=Object(o.useCallback)((function(){Object(c.hit)(w.fileDialogOpen)}),[w]);Object(s.useReactBusOn)("cbir:search-by-image:error",j);var S=Object(o.useCallback)((function(){var t;_(),null===(t=m.current)||void 0===t||t.click()}),[_]);Object(s.useReactBusOn)("cbir:open-file-dialog",S);var E=Object(o.useCallback)((function(){if(!Object(u.isFlagEnabled)("images_cbir_touch_camera"))return l||b?(_(),location.assign("native://image_search")):y?(_(),location.assign("wireframe://?intent=openImageSearchScreen")):void S()}),[l,b,y,_,S]);Object(s.useReactBusOn)("cbir:open-camera",E),function(t){var e=t.downscaleWidth,n=t.downscaleHeight,r=t.downscaleQuality,i=rt(tt(),2),u=i[0],c=i[1],f=$(),l=Object(o.useCallback)((function(t){return et(void 0,void 0,void 0,(function(){var o,i,s,l,d,p,b;return nt(this,(function(v){switch(v.label){case 0:o=Date.now(),i=u("file"),v.label=1;case 1:return v.trys.push([1,5,,6]),Object(a.reactBus)().emit("cbir:search-by-image:start",{searchType:"file",file:t,searchUniqKey:i}),[4,(y=t,w=e,m=n,g="image/jpeg",O=r,void 0===g&&(g=y.type),void 0===O&&(O=1),L(void 0,void 0,Promise,(function(){var t,e;return q(this,(function(n){switch(n.label){case 0:return[4,A(y)];case 1:return t=n.sent(),[4,I(t,w,m)];case 2:return e=n.sent(),[4,h(e,g,O)];case 3:return[2,n.sent()]}}))})))];case 2:return s=v.sent(),[4,z(s)];case 3:return l=v.sent(),c(i)?K(l)?(W(l),[2]):(d=F(l.url),p=V(l),[4,f({originalImageUrl:d,cbirId:p})]):[2];case 4:return v.sent(),Object(a.reactBus)().emit("cbir:search-by-image:success",{searchType:"file",file:t,downscaledFile:s,originalImageUrl:d,cbirId:p,time:Date.now()-o,searchUniqKey:i}),[3,6];case 5:return b=v.sent(),Object(a.reactBus)().emit("cbir:search-by-image:error",{searchType:"file",error:b,file:t,time:Date.now()-o,searchUniqKey:i}),[3,6];case 6:return[2]}var y,w,m,g,O}))}))}),[e,n,r,u,c,f]);Object(s.useReactBusOn)("cbir:search-by-file",l)}({downscaleWidth:e,downscaleHeight:n,downscaleQuality:r}),function(){var t=lt(tt(),2),e=t[0],n=t[1],r=$(),i=Object(o.useCallback)((function(t){return st(void 0,void 0,void 0,(function(){var o,i,u,c,s,f,l;return ft(this,(function(d){switch(d.label){case 0:o=it(t),i=Date.now(),u=e("url"),d.label=1;case 1:return d.trys.push([1,4,,5]),Object(a.reactBus)().emit("cbir:search-by-image:start",{searchType:"url",url:o,searchUniqKey:u}),[4,ct(o)];case 2:return c=d.sent(),n(u)?K(c)?(W(c),[2]):(s=F(c.url),f=V(c),[4,r({originalImageUrl:s,cbirId:f})]):[2];case 3:return d.sent(),Object(a.reactBus)().emit("cbir:search-by-image:success",{searchType:"url",url:o,time:Date.now()-i,searchUniqKey:u}),[3,5];case 4:return l=d.sent(),Object(a.reactBus)().emit("cbir:search-by-image:error",{searchType:"url",error:l,url:o,time:Date.now()-i,searchUniqKey:u}),[3,5];case 5:return[2]}}))}))}),[e,n,r]);Object(s.useReactBusOn)("cbir:search-by-url",i)}();var x=Object(o.useCallback)((function(t){Object(c.hit)(w.clipboardFile,{vars:{size:t.size,type:t.type}}),Object(a.reactBus)().emit("cbir:search-by-file",t)}),[w]);d(x),function(t,e){var n=Object(o.useRef)(!1),r=Object(o.useRef)(!1),i=Object(o.useRef)(0),u=bt(Object(dt.default)(),2),a=u[0],c=u[1],f=c.add,l=c.remove,d=bt(Object(dt.default)(),2),p=d[0],h=d[1],b=h.add,v=h.remove,y=Object(o.useCallback)((function(t,e){f(t),e&&b(t)}),[f,b]),w=Object(o.useCallback)((function(t){l(t),v(t)}),[l,v]);Object(s.useReactBusOn)("cbir:register-global-drop-area",y),Object(s.useReactBusOn)("cbir:unregister-global-drop-area",w);var m=Object(o.useCallback)((function(){window.clearTimeout(i.current),i.current=0}),[]),g=Object(o.useCallback)((function(e){n.current||(m(),n.current=!0,r.current=e,requestAnimationFrame((function(){return t(e)})))}),[m,t]),O=Object(o.useCallback)((function(){if(n.current){m();var t=r.current;n.current=!1,r.current=!1,i.current=window.setTimeout(e,50,t)}}),[m,e]);Object(o.useEffect)((function(){return a.forEach((function(t){t.addEventListener("drop",O)})),function(){a.forEach((function(t){t.removeEventListener("drop",O)}))}}),[a,O]),Object(o.useEffect)((function(){return p.forEach((function(t){t.addEventListener("dragleave",O)})),function(){p.forEach((function(t){t.removeEventListener("dragleave",O)}))}}),[p,O]),Object(o.useEffect)((function(){var t=function(t){var e=t.dataTransfer;if(t.target&&e){var n=Object(pt.findImageLikeElement)(t.target);if(n){n!==t.target&&"function"==typeof e.setDragImage&&e.setDragImage(n,0,0);var r=Object(ht.extractImageUrl)(n);r&&function(t,e){try{t.setData("text/uri-list",e),t.setData("text/plain",e)}catch(n){t.setData("URL",e),t.setData("Text",e)}}(e,it(r))}}g(!1)},e=function(){return g(!0)},n=function(){return O()};return document.addEventListener("dragstart",t),document.addEventListener("dragover",e),document.addEventListener("dragend",n),function(){document.removeEventListener("dragstart",t),document.removeEventListener("dragover",e),document.removeEventListener("dragend",n)}}),[g,O])}(Object(o.useCallback)((function(t){Object(c.hit)(w.dragStart),Object(a.reactBus)().emit("cbir:drag-start",t)}),[w]),Object(o.useCallback)((function(t){Object(c.hit)(w.dragEnd),Object(a.reactBus)().emit("cbir:drag-end",t)}),[w]));var k=Object(o.useCallback)((function(t){Object(c.hit)(w.fileDialogSelect,{vars:{size:t.size,type:t.type}}),Object(a.reactBus)().emit("cbir:search-by-file",t)}),[w]);return i.a.createElement(mt,{ref:m,onSelect:k})},Ot=Object(r.createApp)("CbirCore")(gt)},"qk/3":function(t,e,n){"use strict";n.r(e),n.d(e,"extractImageUrl",(function(){return r}));var r=function(t){return"IMG"===t.tagName?t.getAttribute("src"):function(t){var e=getComputedStyle(t).backgroundImage.match(/url\("([^"]+)"\)/);return e?e[1]:null}(t)}},qqpq:function(t,e,n){"use strict";n.r(e);var r=n("cDcd"),o=n("Z29Q").isClient?window:null,i=function(t){return!!t.addEventListener},u=function(t){return!!t.on};e.default=function(t,e,n,a){void 0===n&&(n=o),Object(r.useEffect)((function(){if(e&&n)return i(n)?n.addEventListener(t,e,a):u(n)&&n.on(t,e,a),function(){i(n)?n.removeEventListener(t,e,a):u(n)&&n.off(t,e,a)}}),[t,e,n,JSON.stringify(a)])}},rpyk:function(t,e,n){"use strict";n.r(e),n.d(e,"findImageLikeElement",(function(){return r}));var r=function(t){return t.nodeType!==Node.ELEMENT_NODE?null:"IMG"===t.tagName?t:t.querySelector("img[src]")||t.querySelector("[style*=background-image]")||null}},s2SP:function(t,e,n){"use strict";n.r(e),n.d(e,"useReactBusOn",(function(){return c}));var r=n("cDcd"),o=n("VQUf"),i=n("QGFb"),u=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),u=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)u.push(r.value)}catch(a){o={error:a}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return u},a=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(u(arguments[e]));return t},c=function(t,e){var n=Object(o.default)();Object(r.useEffect)((function(){var r=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];n()&&e.apply(void 0,a(t))};return Object(i.reactBus)().on(t,r),function(){Object(i.reactBus)().off(t,r)}}),[t,e,n])}},t8E2:function(t,e,n){"use strict";n.r(e),n.d(e,"canUseDom",(function(){return r}));var r=Boolean("undefined"!=typeof window&&window.document&&window.document.createElement)},tI3j:function(t,e,n){"use strict";n.r(e),n.d(e,"getGlobalHistoryState",(function(){return i})),n.d(e,"mergeHistoryState",(function(){return u})),n.d(e,"getDefaultState",(function(){return a})),n.d(e,"applyDefaultState",(function(){return c}));var r=n("t8E2"),o=Object.prototype.hasOwnProperty,i=function(){return Object.assign({},r.canUseDom?history.state:null)},u=function(t){return Object.assign({},i(),t)},a=function(t){return void 0===t&&(t={}),Object.assign({},"function"==typeof t?t():t)},c=function(t,e){var n=Object.assign({},t);for(var r in e)o.call(e,r)&&!o.call(n,r)&&(n[r]=e[r]);return n}},yYyQ:function(t,e,n){n.r(e);var r=n("MMKl");Object(r.setI18nLang)("ru")},"zU8/":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return t?e.some:e.none||""}}});